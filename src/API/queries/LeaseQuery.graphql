query GetLeasesAndOccupants ($ownership_id: String!) {
    getLeasesAndOccupants (ownership_id: $ownership_id) {
        ...LeaseCollectionAPIResponseFields
    }
}

query CanAddReview (
    $student_id: String!,
    $property_id: String!
) {
    canAddReview(student_id: $student_id, property_id: $property_id) {
        success
        error
        data {
            value
        }
    }
}

mutation AddReviewForLease (
    $lease_id: String!,
    $student_id: String!,
    $property_review: String!,
    $property_rating: Float!,
    $landlord_review: String!,
    $landlord_rating: Float!,
    $property_images: [String!]!
) {
    addReviewForLease (
        lease_id: $lease_id,
        student_id: $student_id,
        property_review: $property_review,
        property_rating: $property_rating,
        landlord_review: $landlord_review,
        landlord_rating: $landlord_rating,
        property_images: $property_images
    ) {
        ...LeaseAPIResponseFields
    }
}

mutation ActivateLease (
    $lease_id: String!,
    $lease_document_id: String!,
    $price_per_month: Float!,
    $lease_start_date: String!,
    $lease_end_date: String!
) {
    activateLease(
        lease_id: $lease_id,
        lease_document_id: $lease_document_id,
        price_per_month: $price_per_month,
        lease_start_date: $lease_start_date,
        lease_end_date: $lease_end_date
    ) {
        ...LeaseAPIResponseFields
    }
}

mutation UpdateUnoccupiedLeases (
    $ownership_id: String!,
    $leases_info: [LeaseUpdateInput!]!
) {
    updateUnoccupiedLeases(ownership_id: $ownership_id, leases_info:$leases_info) {
        ...LeaseCollectionAPIResponseFields
    }
}

fragment LeaseAPIResponseFields on LeaseAPIResponse {
    success
    error
    data {
        ...LeaseFields
    }
}

fragment LeaseCollectionAPIResponseFields on LeaseCollectionAPIResponse {
    success
    error
    data {
        leases {
            ...LeaseFields
        }
    }
}

fragment LeaseFields on Lease {
    _id
    active
    ownership_id
    price_per_month
    occupant_id
    occupant_doc {
        ...LeaseOccupant
    }
    external_occupant
    priority {
        level
        start_date
        end_date
    }
    lease_document_id
    lease_availability_start_date
    lease_availability_end_date
    lease_history {
        price
        student_id
        start_date
        end_date
        review_of_property {
            rating
            review
            response
        }
        review_of_landlord {
            rating
            review
            response
        }
        property_images {
            s3_key
            date_uploaded
        }
    }
}

fragment LeaseOccupant on Student {
    _id
    first_name
    phone_number
    last_name
    email
    elevated_privileges
    auth_info {
      cas_id
      institution_id
    }
    user_settings {
      recieve_email_notifications
      push_subscriptions {
        endpoint
        keys {
          p256dh
          auth
        }
      }
    }
    search_status {
      date_updated
      searching
      search_start
      search_end
      price_start
      price_end
    }
}